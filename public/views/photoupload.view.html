<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand home" href="#!home">Familielejr</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
            <li id="about" ng-show="isLoggedIn"><a href="#!about">Om familielejren</a></li>
            <li id="history" ng-show="isLoggedIn" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Historie<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li id="campmap"><a href="#!campmap">Kort</a></li>
                    <li id="camplist"><a href="#!camplist">Liste over lejre</a></li>
                </ul>
            </li>
            <li id="familytree" ng-show="isLoggedIn"><a href="#!familytree">Stamtræ</a></li>
            <li id="photoalbum" ng-show="isLoggedIn" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Fotoalbum<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li><a href="#!photoupload">Upload af billeder</a></li>
                    <li><a href="#!photoalbum/1993">1993</a></li>
                    <li><a href="#!photoalbum/1994">1994</a></li>
                    <li><a href="#!photoalbum/1995">1995</a></li>
                    <li><a href="#!photoalbum/1996">1996</a></li>
                    <li><a href="#!photoalbum/1997">1997</a></li>
                    <li><a href="#!photoalbum/1998">1998</a></li>
                    <li><a href="#!photoalbum/1999">1999</a></li>
                    <li><a href="#!photoalbum/2000">2000</a></li>
                    <li><a href="#!photoalbum/2001">2001</a></li>
                    <li><a href="#!photoalbum/2002">2002</a></li>
                    <li><a href="#!photoalbum/2003">2003</a></li>
                    <li><a href="#!photoalbum/2004">2004</a></li>
                    <li><a href="#!photoalbum/2005">2005</a></li>
                    <li><a href="#!photoalbum/2006">2006</a></li>
                    <li><a href="#!photoalbum/2007">2007</a></li>
                    <li><a href="#!photoalbum/2008">2008</a></li>
                    <li><a href="#!photoalbum/2009">2009</a></li>
                    <li><a href="#!photoalbum/2010">2010</a></li>
                    <li><a href="#!photoalbum/2011">2011</a></li>
                    <li><a href="#!photoalbum/2012">2012</a></li>
                    <li><a href="#!photoalbum/2013">2013</a></li>
                    <li><a href="#!photoalbum/2014">2014</a></li>
                    <li><a href="#!photoalbum/2015">2015</a></li>
                    <li><a href="#!photoalbum/2016">2016</a></li>
                    <li><a href="#!photoalbum/2017">2017</a></li>
                    <li><a href="#!myphotoalbum">Mine billeder</a></li>
                </ul>
            </li>
            <li id="nextcamp" ng-show="isLoggedIn" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Næste Familielejr<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li id="nextcampinfo"><a href="#!eventinfo">Information</a></li>
                    <li id="eventreg"><a href="#!eventregistration">Tilmelding</a></li>
                    <li id="eventregall"><a href="#!eventregistrationall">Liste over alle tilmeldte</a></li>
                </ul>
            </li>
            <li id="entertainment" ng-show="isLoggedIn" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Underholdning<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li id="games"><a href="#!games">Lege og spil</a></li>
                </ul>
            </li>
            <li id="register" ng-show="!isLoggedIn"><a href="#!register">Registrer</a></li>
            <li id="login" ng-show="!isLoggedIn"><a href="#!login">Login</a></li>
            <li id="myaccount" ng-show="isLoggedIn" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Min konto <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li id="logout"><a href="#!logout">Log ud</a></li>
                    <li id="myprofile"><a href="#!profile">Min profil</a></li>
                    <li id="changepassword"><a href="#!changepassword">Ændre kodeord</a></li>
                </ul>
            </li>
            <li id="organizer" ng-show="isLoggedIn && role < 2" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Arrangør<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li id="invitationadmin"><a href="#!invitationadmin">Administrer invitation</a></li>
                    <li id="futurecamps"><a href="#!futurecamps">Fremtidige lejre</a></li>
                    <li id="eventregall"><a href="#!eventregistrationall">Administrer tilmeldinger</a></li>
                    <li id="todolist"><a href="#!todolist">Huskelister</a></li>
                    <li id="finances"><a href="#!finances">Økonomi</a></li>
                    <li id="usersadmin"><a href="#!usersadmin">Brugere</a></li>
                </ul>
            </li>
            <li id="admin" ng-show="isLoggedIn && role < 1" class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Administrator<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li id="usersadmin"><a href="#!usersadmin">Administrer brugere</a></li>
                    <li id="photoadmin"><a href="#!photoalbum/2017">Administrer billeder</a></li>
                </ul>
            </li>
            <li id="contact" ng-show="isLoggedIn && role == 2"><a href="#!content">Kontakt</a></li>
        </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="col-md-6">
    <h1>Upload af fotografier</h1>
    <p>Her kan du lægge dine billeder fra familielejrene op. Vælg det år, billedet blev taget. Vælg derefter 
        det billede, du vil lægge op, fra din computer.</p>
    <p>Der kommer en fejlmeddellelse, hvis du forsøger at lægge et billede op, med et navn, der allerede er 
        lagt op en gang</p>
    <p>OBS: Vær venlig ikke at lægge alt for mange billeder op for hvert år. Tænk over, hvilke der har generel 
        interesse for de fleste. Læg ikke flere billeder op af den samme situation. Læg ikke billeder op, som 
        ligner billeder, andre allerede har lagt op.</p>
    <hr>
    <form name="photouploadForm">
        <fieldset>
        <!-- <legend>Upload on form submit</legend> -->
        <div class="row">
            <div class="form-group col-md-8">
                <label>Hvilket år blev fotografiet taget?</label>
                <select class="form-control" ng-model="year" ng-change="getUploadedPhotos()" name="year" required>
                    <option ng-repeat="year in years" value="{{year.year}}">{{year.year}}</option>
                </select>
                <i ng-show="photouploadForm.year.$error.required">*Skal vælges</i>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-10">
                <label>Fotografi:</label>
                <input type="file" ngf-select ng-model="picFile" ng-change="checkImageReplica(picFile)" name="file"    
                        accept="image/*" ngf-max-size="10MB" required
                        ngf-model-invalid="errorFile">
                <i ng-show="photouploadForm.file.$error.required">*Skal vælges</i><br>
                <i ng-show="photouploadForm.file.$error.maxSize">Filen er for stor 
                    {{errorFile.size / 1000000|number:1}}MB: max 10MB</i>
                <img ng-show="photouploadForm.file.$valid" ngf-thumbnail="picFile" class="thumb"> <button ng-click="picFile = null" ng-show="picFile">Remove</button>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label>Tekst til billedet (valgfrit)</label>
                <input type="text" class="form-control" ng-model="picturetext" name="picturetext" placeholder="Tekst til billedet">
            </div>
        </div>
        <br>
        <div class="row">
            <div class="form-group col-md-12">
                <button btn btn-default ng-disabled="!photouploadForm.$valid || imageReplica" 
                    ng-click="uploadPicture(picFile)">Send</button>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <span class="alert alert-info" ng-show="successMsg != ''">{{successMsg}}</span>
                <span class="alert alert-danger" ng-show="errorMsg != ''">{{errorMsg}}</span>
            </div>
        </div>
        <div class="row">
        <div class="form-group col-md-12">
            <span class="progress" ng-show="picFile.progress >= 0">
                <div style="width:{{picFile.progress}}%" 
                    ng-bind="picFile.progress + '%'"></div>
            </span>
        </div>
        </div>
<!-- 
        <div class="row">
            <div class="form-group col-md-12">
                <span ng-show="picFile.result">{{successMsg}}</span>
                <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
            </div>
        </div>
 -->        
        </fieldset>
        <br>
    </form>
</div>
<div class="col-md-6" ng-show="showImagesList">
    <h3 class="heading">Billeder du allerede har uploaded, taget i {{year}}:</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th width="15%">Navn</th>
                <th width="15%">Type</th>
                <th width="70%">Første tekst</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="image in images">
                <td>{{ image.filename }}</td>
                <td>{{ image.filetype }}</td>
                <td>{{ image.imagetext[0].textobj.text }}</td>
            </tr>
        </tbody>
    </table>
    <div ng-show="!imagesExist">
        <tr>
            <td></td><td>Du har ikke uploaded nogen billeder fra {{year}} endnu</td>
        </tr>
    </div>
</div>

<script type="text/javascript">
    $('#photoalbum').addClass('active');
    $('#photoupload').addClass('active');
</script>